<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIæ–°é—»æµ·æŠ¥ç”Ÿæˆå™¨</title>
    <style>
        body {
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #333;
            background: linear-gradient(135deg, #121212 0%, #2b2b2b 100%);
            color: #f0f0f0;
        }
        .container {
            max-width: 800px;
            width: 100%;
            text-align: center;
        }
        h1 {
            color: #00aeff;
            margin-bottom: 30px;
            font-size: 2.5rem;
            text-shadow: 0 0 15px rgba(0, 174, 255, 0.5);
        }
        .poster-container {
            margin: 20px 0;
            display: flex;
            justify-content: center;
        }
        #ai-poster {
            width: 100%;
            max-width: 500px;
            height: auto;
            display: none;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 174, 255, 0.3);
            transition: transform 0.3s;
        }
        #ai-poster:hover {
            transform: scale(1.02);
        }
        .generate-btn {
            background: linear-gradient(45deg, #00aeff 0%, #0066ff 100%);
            color: white;
            border: none;
            padding: 14px 28px;
            font-size: 18px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
            margin: 20px 0;
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(0, 174, 255, 0.4);
            position: relative;
            overflow: hidden;
        }
        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 174, 255, 0.6);
        }
        .generate-btn::after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            transition: 0.5s;
        }
        .generate-btn:hover::after {
            left: 100%;
            top: 100%;
        }
        .download-btn {
            background: linear-gradient(45deg, #00c853 0%, #64dd17 100%);
            color: white;
            border: none;
            padding: 14px 28px;
            font-size: 18px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
            margin: 20px 0;
            display: none;
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(100, 221, 23, 0.4);
            position: relative;
            overflow: hidden;
        }
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(100, 221, 23, 0.6);
        }
        .download-btn::after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            transition: 0.5s;
        }
        .download-btn:hover::after {
            left: 100%;
            top: 100%;
        }
        .features {
            text-align: left;
            margin: 30px 0;
            background: rgba(255, 255, 255, 0.03);
            padding: 25px 35px;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        .features h3 {
            color: #00aeff;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 10px;
            text-shadow: 0 0 10px rgba(0, 174, 255, 0.3);
        }
        .features ul {
            padding-left: 20px;
        }
        .features li {
            margin-bottom: 12px;
            position: relative;
            padding-left: 5px;
        }
        .badge {
            display: inline-block;
            background: linear-gradient(45deg, #ff4081 0%, #ff6e40 100%);
            color: white;
            font-size: 12px;
            padding: 3px 8px;
            border-radius: 15px;
            margin-left: 8px;
            vertical-align: middle;
            box-shadow: 0 2px 6px rgba(255, 64, 129, 0.4);
        }
        .logo-upload {
            margin: 20px 0;
            text-align: center;
        }
        .logo-label {
            display: inline-block;
            background: linear-gradient(45deg, #673ab7 0%, #9c27b0 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(156, 39, 176, 0.3);
        }
        .logo-label:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(156, 39, 176, 0.5);
        }
        #logo-file {
            display: none;
        }
        #logo-preview {
            max-width: 100px;
            max-height: 100px;
            margin-top: 10px;
            border-radius: 8px;
            display: none;
        }
        /* æ·»åŠ ç¼–è¾‘åŠŸèƒ½çš„æ ·å¼ */
        .edit-btn {
            background: linear-gradient(45deg, #ff9800 0%, #ff5722 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
            margin: 20px 0;
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(255, 152, 0, 0.4);
        }
        .edit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(255, 152, 0, 0.5);
        }
        .news-editor {
            display: none;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 16px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .news-editor h3 {
            color: #00aeff;
            margin-bottom: 15px;
        }
        .news-item-editor {
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            text-align: left;
        }
        .news-editor input, .news-editor textarea {
            width: 100%;
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
        }
        .news-editor label {
            display: block;
            margin-top: 10px;
            color: #aaa;
            text-align: left;
            font-size: 0.9em;
        }
        .date-editor {
            margin-bottom: 20px;
        }
        .save-btn {
            background: linear-gradient(45deg, #4caf50 0%, #8bc34a 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 15px;
            font-weight: bold;
        }
        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(76, 175, 80, 0.5);
        }
        /* æ·»åŠ JSONç¼–è¾‘å™¨æ ·å¼ */
        .json-editor {
            display: none;
            margin-top: 20px;
        }
        .json-textarea {
            width: 100%;
            height: 300px;
            background: rgba(0, 0, 0, 0.2);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            font-family: monospace;
            resize: vertical;
        }
        .editor-tabs {
            display: flex;
            margin-bottom: 15px;
        }
        .editor-tab {
            padding: 10px 20px;
            background: rgba(0, 0, 0, 0.3);
            color: white;
            border: none;
            margin-right: 5px;
            border-radius: 5px 5px 0 0;
            cursor: pointer;
            opacity: 0.7;
        }
        .editor-tab.active {
            background: rgba(0, 174, 255, 0.3);
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒŸ AIç§‘æŠ€å‰æ²¿å¿«æŠ¥ ğŸš€</h1>
        <p>ä¸€é”®ç”Ÿæˆç§‘æŠ€æ„Ÿåè¶³çš„AIæ–°é—»æµ·æŠ¥ï¼Œéšæ—¶æŒæ¡å…¨çƒAIæœ€æ–°åŠ¨æ€ï¼</p>
        <p style="color: #00aeff; font-size: 0.9em;">æç¤ºï¼šè¯·ä¸Šä¼ Logoå›¾ç‰‡ä»¥è·å¾—æœ€ä½³ä½“éªŒ</p>
        
        <div class="logo-upload">
            <label for="logo-file" class="logo-label">ğŸ“· é€‰æ‹©Logoå›¾ç‰‡</label>
            <input type="file" id="logo-file" accept="image/*">
            <div>
                <img id="logo-preview" alt="Logoé¢„è§ˆ">
            </div>
        </div>
        
        <button id="edit-news-btn" class="edit-btn">âœï¸ ç¼–è¾‘æ–°é—»å†…å®¹</button>
        <button id="generate-btn" class="generate-btn">âœ¨ ç”Ÿæˆé«˜ç§‘æŠ€AIæ–°é—»æµ·æŠ¥ âœ¨</button>
        
        <div class="poster-container">
            <canvas id="poster-canvas" style="display:none;"></canvas>
            <img id="ai-poster" alt="AIæ–°é—»æµ·æŠ¥">
        </div>
        
        <a id="download-btn" class="download-btn" download="AIæ–°é—»æµ·æŠ¥.png">ğŸ“² ä¸‹è½½æµ·æŠ¥åˆ†äº«åˆ°æœ‹å‹åœˆ</a>
        
        <!-- æ–°é—»ç¼–è¾‘å™¨ -->
        <div id="news-editor" class="news-editor">
            <h3>ç¼–è¾‘æ–°é—»å†…å®¹</h3>
            
            <div class="editor-tabs">
                <button class="editor-tab active" id="form-editor-tab">è¡¨å•ç¼–è¾‘</button>
                <button class="editor-tab" id="json-editor-tab">JSONç¼–è¾‘</button>
            </div>
            
            <div id="form-editor">
                <div class="date-editor">
                    <label for="news-date">æ—¥æœŸ:</label>
                    <input type="text" id="news-date" placeholder="ä¾‹å¦‚ï¼š2025å¹´3æœˆ26æ—¥">
                </div>
                
                <div id="news-items-container">
                    <!-- æ–°é—»é¡¹ç¼–è¾‘åŒºåŸŸä¼šé€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <div>
                    <label for="hashtags">è¯é¢˜æ ‡ç­¾ (ç”¨é€—å·åˆ†éš”):</label>
                    <input type="text" id="hashtags" placeholder="ä¾‹å¦‚ï¼šäººå·¥æ™ºèƒ½,ç§‘æŠ€å‰æ²¿,AIé©å‘½,æ•°å­—åŒ–æœªæ¥">
                </div>
            </div>
            
            <div id="json-editor" class="json-editor">
                <p>ç›´æ¥ç¼–è¾‘JSONæ ¼å¼çš„æ–°é—»æ•°æ®ï¼š</p>
                <textarea id="json-textarea" class="json-textarea" spellcheck="false"></textarea>
            </div>
            
            <button id="save-news-btn" class="save-btn">ğŸ’¾ ä¿å­˜ä¿®æ”¹</button>
        </div>
        
        <div class="features">
            <h3>ğŸ“Š æœ¬æœŸç²¾é€‰AIå‰æ²¿èµ„è®¯ ğŸ“Š</h3>
            <ul id="news-list">
                <!-- æ–°é—»åˆ—è¡¨ä¼šé€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </ul>
        </div>
    </div>

    <script>
        // æ–°é—»æ•°æ®é…ç½® - æ¯å¤©åªéœ€è¦æ›´æ–°è¿™é‡Œçš„å†…å®¹
        const newsData = {
            date: '2025å¹´3æœˆ26æ—¥',
            items: [
                {
                    emoji: 'ğŸ”¥',
                    title: 'DeepSeek V3-0324ï¼šå¼€æºAIæ–°å·…å³°',
                    content: [
                        'ä¸­å›½AIåˆåˆ›å…¬å¸æœ€æ–°æ¨¡å‹æˆä¸ºé¦–ä¸ªåœ¨éæ¨ç†æ¨¡å‹åŸºå‡†æµ‹è¯•ä¸­',
                        'ç™»é¡¶çš„å¼€æºAIã€‚è‹¹æœCEOåº“å…‹è¯„ä»·ï¼š"éå¸¸å“è¶Š"ã€‚'
                    ],
                    badge: 'ç‹¬å®¶'
                },
                {
                    emoji: 'ğŸš€',
                    title: 'ARC-AGI-2ï¼šæœ€ä¸¥è‹›AIåŸºå‡†æµ‹è¯•å‘å¸ƒ',
                    content: [
                        'ARC Prizeæ¨å‡ºçš„æ–°åŸºå‡†æµ‹è¯•è¢«è®¤ä¸ºæ˜¯ç›®å‰è¯„ä¼°AGIèƒ½åŠ›çš„',
                        'æœ€é«˜æ ‡å‡†ï¼Œå°†æˆä¸ºåˆ¤æ–­AIæ¥è¿‘äººç±»æ°´å¹³çš„å…³é”®æŒ‡æ ‡ã€‚'
                    ]
                },
                {
                    emoji: 'ğŸŒ',
                    title: 'Claudeè·å¾—ç½‘é¡µæœç´¢èƒ½åŠ›é‡å¤§å‡çº§',
                    content: [
                        'Anthropicä¸ºå…¶AIåŠ©æ‰‹Claudeæ·»åŠ å®æ—¶ç½‘é¡µæœç´¢åŠŸèƒ½ï¼Œ',
                        'æ˜¾è‘—æå‡å›åº”è´¨é‡å’Œå‡†ç¡®æ€§ï¼Œæé«˜æ—¶æ•ˆæ€§ã€‚'
                    ],
                    badge: 'çƒ­é—¨'
                },
                {
                    emoji: 'ğŸ†',
                    title: 'å…¨çƒAIæ ¼å±€æŠ¥å‘Šï¼šå¤šæåŒ–è¶‹åŠ¿æ˜æ˜¾',
                    content: [
                        'æœ€æ–°ç ”ç©¶æ˜¾ç¤ºï¼Œå…¨çƒAIå‘å±•å‘ˆå¤šæåŒ–è¶‹åŠ¿ï¼Œä¸­å›½å’Œæ¬§ç›Ÿåœ¨',
                        'ç‰¹å®šAIé¢†åŸŸå·²å®ç°èµ¶è¶…ï¼Œå…¨çƒåˆ›æ–°ä¸­å¿ƒå¤šå…ƒåŒ–å‘å±•ã€‚'
                    ]
                },
                {
                    emoji: 'ğŸ§ ',
                    title: 'ç¥ç»å¤šæ ·æ€§æå‡AIç³»ç»Ÿåˆ›é€ åŠ›ä¸å…¬å¹³æ€§',
                    content: [
                        'ç ”ç©¶è¡¨æ˜ï¼Œèåˆä¸åŒæ€ç»´æ–¹å¼çš„å¼€å‘å›¢é˜Ÿåˆ›é€ çš„AIç³»ç»Ÿ',
                        'åˆ›é€ æ€§æå‡35%ï¼Œç³»ç»Ÿæ€§åè§å‡å°‘40%ã€‚'
                    ]
                },
                {
                    emoji: 'ğŸ›¡ï¸',
                    title: 'AIå®‰å…¨æŠ€æœ¯å–å¾—çªç ´æ€§è¿›å±•',
                    content: [
                        'æœ€æ–°é˜²å¾¡æŠ€æœ¯ä½¿AIæ¨¡å‹æŠµå¾¡å¹²æ‰°èƒ½åŠ›æå‡10å€ï¼Œæ‹’ç»æœ‰å®³',
                        'æŒ‡ä»¤å‡†ç¡®ç‡è¾¾99.7%ï¼Œä¸ºAIåº”ç”¨æä¾›æ›´å¯é çš„å®‰å…¨ä¿éšœã€‚'
                    ],
                    badge: 'æ–°å¢'
                },
                {
                    emoji: 'ğŸ”®',
                    title: 'AIåŒ»ç–—è¯Šæ–­è¶…è¶Šä¸“å®¶å›¢é˜Ÿå…±è¯†',
                    content: [
                        'æ–°ä¸€ä»£AIè¯Šæ–­ç³»ç»Ÿåœ¨ç›²æµ‹ä¸­å‡†ç¡®ç‡è¶…è¿‡ä¸“å®¶å›¢é˜Ÿ5%ï¼Œèƒ½å¤Ÿ',
                        'è¯†åˆ«äººç±»åŒ»ç”Ÿæ˜“å¿½ç•¥çš„æ—©æœŸç—‡çŠ¶ï¼Œå¤§å¹…æå‡æ—©è¯Šç‡ã€‚'
                    ],
                    badge: 'é‡è¦'
                }
            ],
            hashtags: ['äººå·¥æ™ºèƒ½', 'ç§‘æŠ€å‰æ²¿', 'AIé©å‘½', 'æ•°å­—åŒ–æœªæ¥']
        };

        // æ›´æ–°é¡µé¢ä¸Šçš„æ–°é—»åˆ—è¡¨
        function updateNewsList() {
            const newsList = document.getElementById('news-list');
            newsList.innerHTML = ''; // æ¸…ç©ºç°æœ‰å†…å®¹
            
            newsData.items.forEach(item => {
                const li = document.createElement('li');
                let content = item.emoji + ' ' + item.title;
                
                if (item.badge) {
                    content += `<span class="badge">${item.badge}</span>`;
                }
                
                li.innerHTML = content;
                newsList.appendChild(li);
            });
        }

        // åˆå§‹åŒ–é¡µé¢æ—¶æ›´æ–°æ–°é—»åˆ—è¡¨
        updateNewsList();
        
        // åˆå§‹åŒ–ç¼–è¾‘å™¨
        function initNewsEditor() {
            // è®¾ç½®æ—¥æœŸ
            document.getElementById('news-date').value = newsData.date;
            
            // è®¾ç½®æ ‡ç­¾
            document.getElementById('hashtags').value = newsData.hashtags.join(',');
            
            // æ¸…ç©ºç°æœ‰çš„æ–°é—»é¡¹ç¼–è¾‘åŒºåŸŸ
            const container = document.getElementById('news-items-container');
            container.innerHTML = '';
            
            // ä¸ºæ¯æ¡æ–°é—»åˆ›å»ºç¼–è¾‘åŒºåŸŸ
            newsData.items.forEach((item, index) => {
                const itemEditor = document.createElement('div');
                itemEditor.className = 'news-item-editor';
                
                const html = `
                    <label for="news-emoji-${index}">è¡¨æƒ…:</label>
                    <input type="text" id="news-emoji-${index}" value="${item.emoji}" placeholder="è¡¨æƒ…ç¬¦å·">
                    
                    <label for="news-title-${index}">æ ‡é¢˜:</label>
                    <input type="text" id="news-title-${index}" value="${item.title}" placeholder="æ–°é—»æ ‡é¢˜">
                    
                    <label for="news-content1-${index}">å†…å®¹ç¬¬ä¸€è¡Œ:</label>
                    <textarea id="news-content1-${index}" placeholder="æ–°é—»å†…å®¹ç¬¬ä¸€è¡Œ">${item.content[0] || ''}</textarea>
                    
                    <label for="news-content2-${index}">å†…å®¹ç¬¬äºŒè¡Œ:</label>
                    <textarea id="news-content2-${index}" placeholder="æ–°é—»å†…å®¹ç¬¬äºŒè¡Œ">${item.content[1] || ''}</textarea>
                    
                    <label for="news-badge-${index}">æ ‡ç­¾ (å¯é€‰):</label>
                    <input type="text" id="news-badge-${index}" value="${item.badge || ''}" placeholder="ä¾‹å¦‚ï¼šçƒ­é—¨ã€ç‹¬å®¶">
                `;
                
                itemEditor.innerHTML = html;
                container.appendChild(itemEditor);
            });
            
            // åˆå§‹åŒ–JSONç¼–è¾‘å™¨
            const jsonEditor = document.getElementById('json-textarea');
            jsonEditor.value = JSON.stringify(newsData, null, 2);
        }
        
        // ä»è¡¨å•ä¿å­˜æ–°é—»æ•°æ®
        function saveNewsDataFromForm() {
            // æ›´æ–°æ—¥æœŸ
            newsData.date = document.getElementById('news-date').value;
            
            // æ›´æ–°æ ‡ç­¾
            const hashtagsInput = document.getElementById('hashtags').value;
            newsData.hashtags = hashtagsInput.split(',').map(tag => tag.trim()).filter(tag => tag);
            
            // æ›´æ–°æ–°é—»é¡¹
            const newsItems = [];
            for (let i = 0; i < newsData.items.length; i++) {
                const emoji = document.getElementById(`news-emoji-${i}`).value;
                const title = document.getElementById(`news-title-${i}`).value;
                const content1 = document.getElementById(`news-content1-${i}`).value;
                const content2 = document.getElementById(`news-content2-${i}`).value;
                const badge = document.getElementById(`news-badge-${i}`).value;
                
                newsItems.push({
                    emoji: emoji,
                    title: title,
                    content: [content1, content2],
                    badge: badge || undefined
                });
            }
            
            newsData.items = newsItems;
        }
        
        // ä»JSONç¼–è¾‘å™¨ä¿å­˜æ–°é—»æ•°æ®
        function saveNewsDataFromJson() {
            try {
                const jsonText = document.getElementById('json-textarea').value;
                const newData = JSON.parse(jsonText);
                
                // éªŒè¯æ•°æ®æ ¼å¼
                if (!newData.date || !Array.isArray(newData.items) || !Array.isArray(newData.hashtags)) {
                    throw new Error('JSONæ ¼å¼ä¸æ­£ç¡®ï¼Œå¿…é¡»åŒ…å«dateã€itemsæ•°ç»„å’Œhashtagsæ•°ç»„');
                }
                
                // æ›´æ–°newsData
                newsData.date = newData.date;
                newsData.items = newData.items;
                newsData.hashtags = newData.hashtags;
                
                return true;
            } catch (error) {
                alert('JSONæ ¼å¼é”™è¯¯: ' + error.message);
                return false;
            }
        }
        
        // ä¿å­˜ç¼–è¾‘åçš„æ–°é—»æ•°æ®
        function saveNewsData() {
            const activeTab = document.querySelector('.editor-tab.active').id;
            
            let success = true;
            if (activeTab === 'form-editor-tab') {
                saveNewsDataFromForm();
            } else if (activeTab === 'json-editor-tab') {
                success = saveNewsDataFromJson();
            }
            
            if (success) {
                // æ›´æ–°é¡µé¢æ˜¾ç¤º
                updateNewsList();
                
                // éšè—ç¼–è¾‘å™¨
                document.getElementById('news-editor').style.display = 'none';
                
                // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
                alert('æ–°é—»å†…å®¹å·²æ›´æ–°ï¼');
            }
        }
        
        // åˆ‡æ¢ç¼–è¾‘å™¨æ ‡ç­¾é¡µ
        document.getElementById('form-editor-tab').addEventListener('click', function() {
            document.getElementById('form-editor').style.display = 'block';
            document.getElementById('json-editor').style.display = 'none';
            document.getElementById('form-editor-tab').classList.add('active');
            document.getElementById('json-editor-tab').classList.remove('active');
            
            // åŒæ­¥JSONç¼–è¾‘å™¨çš„å†…å®¹åˆ°è¡¨å•
            try {
                saveNewsDataFromJson();
                initNewsEditor();
            } catch (e) {
                // å¦‚æœJSONæ— æ•ˆï¼Œä¸è¿›è¡ŒåŒæ­¥
            }
        });
        
        document.getElementById('json-editor-tab').addEventListener('click', function() {
            document.getElementById('form-editor').style.display = 'none';
            document.getElementById('json-editor').style.display = 'block';
            document.getElementById('form-editor-tab').classList.remove('active');
            document.getElementById('json-editor-tab').classList.add('active');
            
            // åŒæ­¥è¡¨å•å†…å®¹åˆ°JSONç¼–è¾‘å™¨
            saveNewsDataFromForm();
            document.getElementById('json-textarea').value = JSON.stringify(newsData, null, 2);
        });
        
        // ç»‘å®šç¼–è¾‘æŒ‰é’®äº‹ä»¶
        document.getElementById('edit-news-btn').addEventListener('click', function() {
            initNewsEditor();
            document.getElementById('news-editor').style.display = 'block';
            document.getElementById('form-editor').style.display = 'block';
            document.getElementById('json-editor').style.display = 'none';
            document.getElementById('form-editor-tab').classList.add('active');
            document.getElementById('json-editor-tab').classList.remove('active');
        });
        
        // ç»‘å®šä¿å­˜æŒ‰é’®äº‹ä»¶
        document.getElementById('save-news-btn').addEventListener('click', saveNewsData);
        
        // Logoä¸Šä¼ é¢„è§ˆ
        document.getElementById('logo-file').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('logo-preview');
                    preview.src = e.target.result;
                    preview.style.display = 'inline-block';
                }
                reader.readAsDataURL(file);
            }
        });

        document.getElementById('generate-btn').addEventListener('click', generatePoster);
        
        function generatePoster() {
            const canvas = document.getElementById('poster-canvas');
            const ctx = canvas.getContext('2d');
            
            // è®¾ç½®ç”»å¸ƒå¤§å°
            canvas.width = 1000;  // å¢åŠ ç”»å¸ƒå®½åº¦
            canvas.height = 2000; // å¢åŠ ç”»å¸ƒé«˜åº¦
            
            // è·å–ç”¨æˆ·ä¸Šä¼ çš„logo
            const logoPreview = document.getElementById('logo-preview');
            
            // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ä¸Šä¼ äº†logo
            if (logoPreview.style.display === 'inline-block' && logoPreview.complete) {
                // ç”¨æˆ·ä¸Šä¼ äº†logoå¹¶ä¸”å›¾ç‰‡å·²åŠ è½½å®Œæˆ
                renderPosterWithLogo(ctx, canvas, logoPreview);
            } else {
                // ç”¨æˆ·æ²¡æœ‰ä¸Šä¼ logoï¼Œä½¿ç”¨ç”Ÿæˆçš„çº¯è‰²logo
                const generatedLogo = generateColorLogo(ctx);
                renderPosterWithLogo(ctx, canvas, generatedLogo);
            }
        }
        
        function renderPosterWithLogo(ctx, canvas, logoImage) {
            // ç»˜åˆ¶èƒŒæ™¯
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#0a1929');
            gradient.addColorStop(0.5, '#0f2547');
            gradient.addColorStop(1, '#1e1033');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // æ·»åŠ ç§‘æŠ€æ„Ÿçº¿æ¡å’Œç²’å­
            drawTechPattern(ctx, canvas.width, canvas.height);
            
            // ç»˜åˆ¶æ ‡é¢˜åŒºèƒŒæ™¯
            ctx.fillStyle = 'rgba(0, 20, 50, 0.7)';
            ctx.fillRect(0, 40, canvas.width, 200);
            
            // æ·»åŠ æ ‡é¢˜å…‰æ•ˆ
            const glowGradient = ctx.createLinearGradient(0, 40, 0, 240);
            glowGradient.addColorStop(0, 'rgba(0, 174, 255, 0.15)');
            glowGradient.addColorStop(1, 'rgba(0, 174, 255, 0)');
            ctx.fillStyle = glowGradient;
            ctx.fillRect(0, 40, canvas.width, 200);
            
            try {
                // æ·»åŠ logoåœ¨å·¦ä¸Šè§’
                const logoSize = 100;
                ctx.drawImage(logoImage, 50, 80, logoSize, logoSize);
            } catch (error) {
                console.error('æ— æ³•ç»˜åˆ¶Logo:', error);
                // å¦‚æœç»˜åˆ¶logoå‡ºé”™ï¼Œç»§ç»­ç”Ÿæˆå…¶ä»–éƒ¨åˆ†
            }
            
            // æ·»åŠ æ ‡é¢˜
            ctx.fillStyle = 'white';
            ctx.font = 'bold 62px "PingFang SC", "Microsoft YaHei", sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText(newsData.date, canvas.width / 2, 120);
            
            ctx.font = 'bold 74px "PingFang SC", "Microsoft YaHei", sans-serif';
            // åˆ›å»ºæ¸å˜æ ‡é¢˜
            const titleGradient = ctx.createLinearGradient(200, 0, 800, 0);
            titleGradient.addColorStop(0, '#00aeff');  
            titleGradient.addColorStop(1, '#64eeff');
            ctx.fillStyle = titleGradient;
            
            // æ·»åŠ è½»å¾®çš„æ ‡é¢˜é˜´å½±
            ctx.shadowColor = 'rgba(0, 174, 255, 0.6)';
            ctx.shadowBlur = 15;
            ctx.fillText('AIç§‘æŠ€å‰æ²¿é€Ÿé€’', canvas.width / 2, 200);
            ctx.shadowBlur = 0;
            
            // æ·»åŠ åˆ†éš”çº¿
            const lineGradient = ctx.createLinearGradient(100, 0, 900, 0);
            lineGradient.addColorStop(0, 'rgba(0, 174, 255, 0)');
            lineGradient.addColorStop(0.5, 'rgba(0, 174, 255, 1)');
            lineGradient.addColorStop(1, 'rgba(0, 174, 255, 0)');
            
            ctx.strokeStyle = lineGradient;
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(50, 260);
            ctx.lineTo(canvas.width - 50, 260);
            ctx.stroke();
            
            try {
                // ç»˜åˆ¶æ–°é—»æ¡†
                drawNewsBoxes(ctx, canvas);
            } catch (error) {
                console.error('ç»˜åˆ¶æ–°é—»æ¡†æ—¶å‡ºé”™:', error);
                // å³ä½¿ç»˜åˆ¶æ–°é—»æ¡†å‡ºé”™ä¹Ÿè¦ç»§ç»­æ˜¾ç¤ºæµ·æŠ¥
            }
            
            try {
                // æ˜¾ç¤ºç”Ÿæˆçš„æµ·æŠ¥
                const posterImg = document.getElementById('ai-poster');
                try {
                    posterImg.src = canvas.toDataURL('image/png');
                } catch (securityError) {
                    console.error('Canvaså®‰å…¨é”™è¯¯:', securityError);
                    // æ— æ³•ä½¿ç”¨toDataURLï¼Œæ˜¾ç¤ºå¤‡ç”¨ä¿¡æ¯
                    displayFallbackPoster(canvas, posterImg);
                    return; // æå‰è¿”å›ï¼Œé¿å…åç»­ä»£ç æ‰§è¡Œ
                }
                posterImg.style.display = 'block';
                
                // æ˜¾ç¤ºä¸‹è½½æŒ‰é’®
                const downloadBtn = document.getElementById('download-btn');
                downloadBtn.href = canvas.toDataURL('image/png');
                
                // æ›´æ–°ä¸‹è½½æ–‡ä»¶åä»¥åŒ…å«æ—¥æœŸ
                const dateStr = newsData.date.replace(/[å¹´æœˆæ—¥]/g, '');
                downloadBtn.download = `AIæ–°é—»æµ·æŠ¥_${dateStr}.png`;
                
                downloadBtn.style.display = 'inline-block';
            } catch (error) {
                console.error('ç”Ÿæˆæµ·æŠ¥å›¾åƒæ—¶å‡ºé”™:', error);
                alert('ç”Ÿæˆæµ·æŠ¥æ—¶å‡ºç°é—®é¢˜ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•ã€‚');
            }
        }
        
        function renderPosterWithoutLogo(ctx, canvas) {
            // ç»˜åˆ¶èƒŒæ™¯
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#0a1929');
            gradient.addColorStop(0.5, '#0f2547');
            gradient.addColorStop(1, '#1e1033');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // æ·»åŠ ç§‘æŠ€æ„Ÿçº¿æ¡å’Œç²’å­
            drawTechPattern(ctx, canvas.width, canvas.height);
            
            // ç»˜åˆ¶æ ‡é¢˜åŒºèƒŒæ™¯
            ctx.fillStyle = 'rgba(0, 20, 50, 0.7)';
            ctx.fillRect(0, 40, canvas.width, 200);
            
            // æ·»åŠ æ ‡é¢˜
            ctx.fillStyle = 'white';
            ctx.font = 'bold 62px "PingFang SC", "Microsoft YaHei", sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText(newsData.date, canvas.width / 2, 120);
            
            ctx.font = 'bold 74px "PingFang SC", "Microsoft YaHei", sans-serif';
            // åˆ›å»ºæ¸å˜æ ‡é¢˜
            const titleGradient = ctx.createLinearGradient(200, 0, 800, 0);
            titleGradient.addColorStop(0, '#00aeff');  
            titleGradient.addColorStop(1, '#64eeff');
            ctx.fillStyle = titleGradient;
            
            // æ·»åŠ è½»å¾®çš„æ ‡é¢˜é˜´å½±
            ctx.shadowColor = 'rgba(0, 174, 255, 0.6)';
            ctx.shadowBlur = 15;
            ctx.fillText('AIç§‘æŠ€å‰æ²¿é€Ÿé€’', canvas.width / 2, 200);
            ctx.shadowBlur = 0;
            
            // æ·»åŠ åˆ†éš”çº¿
            ctx.strokeStyle = 'rgba(0, 174, 255, 1)';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(50, 260);
            ctx.lineTo(canvas.width - 50, 260);
            ctx.stroke();
            
            try {
                // ç»˜åˆ¶æ–°é—»æ¡†
                drawNewsBoxes(ctx, canvas);
            } catch (error) {
                console.error('ç»˜åˆ¶æ–°é—»æ¡†æ—¶å‡ºé”™:', error);
                // å³ä½¿ç»˜åˆ¶æ–°é—»æ¡†å‡ºé”™ä¹Ÿè¦ç»§ç»­æ˜¾ç¤ºæµ·æŠ¥
            }
            
            try {
                // æ˜¾ç¤ºç”Ÿæˆçš„æµ·æŠ¥
                const posterImg = document.getElementById('ai-poster');
                try {
                    posterImg.src = canvas.toDataURL('image/png');
                } catch (securityError) {
                    console.error('Canvaså®‰å…¨é”™è¯¯:', securityError);
                    // æ— æ³•ä½¿ç”¨toDataURLï¼Œæ˜¾ç¤ºå¤‡ç”¨ä¿¡æ¯
                    displayFallbackPoster(canvas, posterImg);
                    return; // æå‰è¿”å›ï¼Œé¿å…åç»­ä»£ç æ‰§è¡Œ
                }
                posterImg.style.display = 'block';
                
                // æ˜¾ç¤ºä¸‹è½½æŒ‰é’®
                const downloadBtn = document.getElementById('download-btn');
                downloadBtn.href = canvas.toDataURL('image/png');
                
                // æ›´æ–°ä¸‹è½½æ–‡ä»¶åä»¥åŒ…å«æ—¥æœŸ
                const dateStr = newsData.date.replace(/[å¹´æœˆæ—¥]/g, '');
                downloadBtn.download = `AIæ–°é—»æµ·æŠ¥_${dateStr}.png`;
                
                downloadBtn.style.display = 'inline-block';
            } catch (error) {
                console.error('ç”Ÿæˆæµ·æŠ¥å›¾åƒæ—¶å‡ºé”™:', error);
                alert('ç”Ÿæˆæµ·æŠ¥æ—¶å‡ºç°é—®é¢˜ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•ã€‚');
            }
        }
        
        // å½“Canvasè¢«æ ‡è®°ä¸ºtaintedæ— æ³•å¯¼å‡ºæ—¶çš„å¤‡ç”¨å‡½æ•°
        function displayFallbackPoster(canvas, posterImg) {
            // åˆ›å»ºä¸€ä¸ªæ–°çš„å®‰å…¨Canvas
            const safeCanvas = document.createElement('canvas');
            const safeCtx = safeCanvas.getContext('2d');
            safeCanvas.width = 500;  // é€‚åˆæ˜¾ç¤ºçš„å°ºå¯¸
            safeCanvas.height = 800;
            
            // ç»˜åˆ¶èƒŒæ™¯
            const gradient = safeCtx.createLinearGradient(0, 0, 0, safeCanvas.height);
            gradient.addColorStop(0, '#0a1929');
            gradient.addColorStop(0.5, '#0f2547');
            gradient.addColorStop(1, '#1e1033');
            safeCtx.fillStyle = gradient;
            safeCtx.fillRect(0, 0, safeCanvas.width, safeCanvas.height);
            
            // æ·»åŠ æ–‡å­—è¯´æ˜
            safeCtx.fillStyle = 'white';
            safeCtx.font = 'bold 24px "PingFang SC", "Microsoft YaHei", sans-serif';
            safeCtx.textAlign = 'center';
            safeCtx.fillText(newsData.date, safeCanvas.width / 2, 50);
            
            // æ·»åŠ æ ‡é¢˜
            safeCtx.font = 'bold 28px "PingFang SC", "Microsoft YaHei", sans-serif';
            safeCtx.fillStyle = '#00aeff';
            safeCtx.fillText('AIç§‘æŠ€å‰æ²¿é€Ÿé€’', safeCanvas.width / 2, 100);
            
            // æ·»åŠ æç¤ºä¿¡æ¯
            safeCtx.font = '16px "PingFang SC", "Microsoft YaHei", sans-serif';
            safeCtx.fillStyle = 'white';
            safeCtx.fillText('å› æµè§ˆå™¨å®‰å…¨é™åˆ¶ï¼Œæ— æ³•æ˜¾ç¤ºå®Œæ•´æµ·æŠ¥', safeCanvas.width / 2, 150);
            safeCtx.fillText('è¯·ä¸Šä¼ æœ¬åœ°Logoæˆ–ä½¿ç”¨çº¯è‰²èƒŒæ™¯', safeCanvas.width / 2, 180);

            // æ·»åŠ ä¸»è¦æ–°é—»æ¡ç›®
            safeCtx.textAlign = 'left';
            safeCtx.font = 'bold 16px "PingFang SC", "Microsoft YaHei", sans-serif';
            safeCtx.fillStyle = '#00aeff';
            
            let yPos = 240;
            // ä½¿ç”¨newsDataä¸­çš„æ–°é—»æ ‡é¢˜
            for (const item of newsData.items) {
                safeCtx.fillText(`${item.emoji} ${item.title}`, 30, yPos);
                yPos += 40;
            }
            
            // æ·»åŠ å“ˆå¸Œæ ‡ç­¾
            safeCtx.textAlign = 'center';
            safeCtx.font = 'bold 14px "PingFang SC", "Microsoft YaHei", sans-serif';
            const hashtagsStr = newsData.hashtags.slice(0, 3).map(tag => `#${tag}`).join(' '); // é™åˆ¶æ˜¾ç¤ºçš„æ ‡ç­¾æ•°é‡
            safeCtx.fillText(hashtagsStr, safeCanvas.width / 2, 550);
            
            // æ˜¾ç¤ºå¤‡ç”¨æµ·æŠ¥
            try {
                posterImg.src = safeCanvas.toDataURL('image/png');
                posterImg.style.display = 'block';
                
                // æ›´æ–°ä¸‹è½½æ–‡ä»¶åä»¥åŒ…å«æ—¥æœŸ
                const dateStr = newsData.date.replace(/[å¹´æœˆæ—¥]/g, '');
                const downloadBtn = document.getElementById('download-btn');
                downloadBtn.download = `AIæ–°é—»æµ·æŠ¥_${dateStr}.png`;
            } catch (e) {
                // å¦‚æœè¿˜æ˜¯å‡ºé”™ï¼Œæ˜¾ç¤ºæ–‡æœ¬æç¤º
                posterImg.style.display = 'none';
                alert('æ— æ³•ç”Ÿæˆé¢„è§ˆã€‚è¯·ä½¿ç”¨ä¸Šä¼ æœ¬åœ°Logoå›¾ç‰‡é‡è¯•ã€‚');
            }
            
            // æ˜¾ç¤ºä¸‹è½½æŒ‰é’®(è¿™é‡Œå…¶å®ä¸èƒ½ä¸‹è½½å®Œæ•´æµ·æŠ¥ï¼Œä½†ä¸ºäº†ä¸€è‡´çš„ç”¨æˆ·ä½“éªŒ)
            const downloadBtn = document.getElementById('download-btn');
            try {
                downloadBtn.href = safeCanvas.toDataURL('image/png');
                downloadBtn.style.display = 'inline-block';
                downloadBtn.textContent = 'ğŸ“² ä¸‹è½½é¢„è§ˆæµ·æŠ¥';
            } catch (e) {
                downloadBtn.style.display = 'none';
            }
        }
        
        function drawTechPattern(ctx, width, height) {
            // ç»˜åˆ¶ç§‘æŠ€æ„ŸèƒŒæ™¯å…ƒç´ 
            
            // ç»˜åˆ¶ç½‘æ ¼ç‚¹
            ctx.fillStyle = 'rgba(0, 174, 255, 0.1)';
            for (let i = 0; i < 200; i++) {
                const x = Math.random() * width;
                const y = Math.random() * height;
                const size = Math.random() * 3 + 1;
                ctx.beginPath();
                ctx.arc(x, y, size, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // ç»˜åˆ¶è¿æ¥çº¿
            ctx.strokeStyle = 'rgba(0, 174, 255, 0.05)';
            ctx.lineWidth = 1;
            for (let i = 0; i < 30; i++) {
                const x1 = Math.random() * width;
                const y1 = Math.random() * height;
                const x2 = x1 + (Math.random() - 0.5) * 300;
                const y2 = y1 + (Math.random() - 0.5) * 300;
                ctx.beginPath();
                ctx.moveTo(x1, y1);
                ctx.lineTo(x2, y2);
                ctx.stroke();
            }
            
            // ç»˜åˆ¶å…‰æŸæ•ˆæœ
            for (let i = 0; i < 8; i++) {
                const x = Math.random() * width;
                const y = Math.random() * height;
                const gradient = ctx.createRadialGradient(x, y, 0, x, y, 350);
                gradient.addColorStop(0, 'rgba(0, 174, 255, 0.03)');
                gradient.addColorStop(1, 'rgba(0, 174, 255, 0)');
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(x, y, 350, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // æ·»åŠ åå­—è½´ç§‘æŠ€çº¿
            ctx.strokeStyle = 'rgba(0, 174, 255, 0.04)';
            for (let i = 0; i < 15; i++) {
                const pos = Math.random() * width;
                ctx.beginPath();
                ctx.moveTo(pos, 0);
                ctx.lineTo(pos, height);
                ctx.stroke();
                
                const posY = Math.random() * height;
                ctx.beginPath();
                ctx.moveTo(0, posY);
                ctx.lineTo(width, posY);
                ctx.stroke();
            }
        }
        
        function drawNewsBoxes(ctx, canvas) {
            // ç»˜åˆ¶æ–°é—»æ¡†èƒŒæ™¯å’Œæ–‡å­— - æ›´åŠ ç§‘æŠ€æ„Ÿçš„è®¾è®¡
            function drawNewsItem(y, title, lines, emoji) {
                try {
                    // è®¡ç®—æ¡†çš„é«˜åº¦ - å¢åŠ é¢å¤–ç©ºé—´
                    const boxHeight = 100 + lines.length * 50;  // å¢åŠ é«˜åº¦ï¼Œæä¾›æ›´å¤šå†…éƒ¨ç©ºé—´
                    
                    // ç»˜åˆ¶èƒŒæ™¯æ¡† - æ¸å˜èƒŒæ™¯
                    const boxGradient = ctx.createLinearGradient(0, y, 0, y + boxHeight);
                    boxGradient.addColorStop(0, 'rgba(0, 40, 80, 0.6)');
                    boxGradient.addColorStop(1, 'rgba(0, 25, 50, 0.6)');
                    ctx.fillStyle = boxGradient;
                    
                    // æ›´å¤§çš„æ¡†å’Œåœ†è§’çŸ©å½¢
                    const boxWidth = canvas.width - 100;
                    const radius = 20;  // å¢å¤§åœ†è§’åŠå¾„
                    roundRect(ctx, 50, y, boxWidth, boxHeight, radius, true, false);
                    
                    // æ·»åŠ è¾¹æ¡†å‘å…‰æ•ˆæœ
                    ctx.strokeStyle = 'rgba(0, 174, 255, 0.3)';
                    ctx.lineWidth = 2;
                    roundRect(ctx, 50, y, boxWidth, boxHeight, radius, false, true);
                    
                    // æ·»åŠ æ›´å®½çš„ä¾§è¾¹è£…é¥°æ¡
                    const decorGradient = ctx.createLinearGradient(0, y, 0, y + boxHeight);
                    decorGradient.addColorStop(0, '#00aeff');
                    decorGradient.addColorStop(1, '#0066ff');
                    ctx.fillStyle = decorGradient;
                    roundRect(ctx, 50, y, 10, boxHeight, {tl: radius, bl: radius, tr: 0, br: 0}, true, false);
                    
                    // ç»˜åˆ¶æ ‡é¢˜ - å¢åŠ æ¸å˜å’Œå‘å…‰æ•ˆæœ
                    const titleGradient = ctx.createLinearGradient(70, 0, 800, 0);
                    titleGradient.addColorStop(0, '#ffffff');
                    titleGradient.addColorStop(1, '#e0f7ff');
                    ctx.fillStyle = titleGradient;
                    ctx.font = 'bold 40px "PingFang SC", "Microsoft YaHei", sans-serif';  // å¢å¤§æ ‡é¢˜å­—ä½“
                    ctx.textAlign = 'left';
                    
                    // æ·»åŠ å‘å…‰æ•ˆæœ
                    ctx.shadowColor = 'rgba(0, 174, 255, 0.6)';
                    ctx.shadowBlur = 10;
                    ctx.fillText(`${emoji} ${title}`, 90, y + 60);  // è°ƒæ•´å‚ç›´ä½ç½®
                    ctx.shadowBlur = 0;
                    
                    // ç»˜åˆ¶å†…å®¹ - æ›´æ¸…æ™°çš„æ–‡å­—ï¼Œæ›´å¤§çš„å­—ä½“å’Œè¡Œè·
                    ctx.fillStyle = '#ffffff';
                    ctx.font = '30px "PingFang SC", "Microsoft YaHei", sans-serif';  // å¢å¤§å†…å®¹å­—ä½“
                    for (let i = 0; i < lines.length; i++) {
                        ctx.fillText(lines[i], 90, y + 120 + (i * 45));  // å¢åŠ è¡Œè·å’Œèµ·å§‹ä½ç½®
                    }
                } catch (error) {
                    console.error('ç»˜åˆ¶æ–°é—»é¡¹æ—¶å‡ºé”™:', error);
                    // å¦‚æœæŸæ¡æ–°é—»æ¸²æŸ“å‡ºé”™ï¼Œç»§ç»­ç»˜åˆ¶å…¶ä»–æ–°é—»
                }
            }
            
            // ç»˜åˆ¶åœ†è§’çŸ©å½¢çš„è¾…åŠ©å‡½æ•°
            function roundRect(ctx, x, y, width, height, radius, fill, stroke) {
                try {
                    if (typeof radius === 'number') {
                        radius = {tl: radius, tr: radius, br: radius, bl: radius};
                    } else {
                        radius = {...{tl: 0, tr: 0, br: 0, bl: 0}, ...radius};
                    }
                    
                    ctx.beginPath();
                    ctx.moveTo(x + radius.tl, y);
                    ctx.lineTo(x + width - radius.tr, y);
                    ctx.quadraticCurveTo(x + width, y, x + width, y + radius.tr);
                    ctx.lineTo(x + width, y + height - radius.br);
                    ctx.quadraticCurveTo(x + width, y + height, x + width - radius.br, y + height);
                    ctx.lineTo(x + radius.bl, y + height);
                    ctx.quadraticCurveTo(x, y + height, x, y + height - radius.bl);
                    ctx.lineTo(x, y + radius.tl);
                    ctx.quadraticCurveTo(x, y, x + radius.tl, y);
                    ctx.closePath();
                    
                    if (fill) {
                        ctx.fill();
                    }
                    if (stroke) {
                        ctx.stroke();
                    }
                } catch (error) {
                    console.error('ç»˜åˆ¶åœ†è§’çŸ©å½¢æ—¶å‡ºé”™:', error);
                    // å‡ºé”™æ—¶å°è¯•ç»˜åˆ¶æ™®é€šçŸ©å½¢æ›¿ä»£
                    try {
                        ctx.beginPath();
                        ctx.rect(x, y, width, height);
                        if (fill) {
                            ctx.fill();
                        }
                        if (stroke) {
                            ctx.stroke();
                        }
                    } catch (fallbackError) {
                        console.error('å¤‡ç”¨çŸ©å½¢ç»˜åˆ¶ä¹Ÿå¤±è´¥:', fallbackError);
                    }
                }
            }
            
            try {
                // ä½¿ç”¨newsDataä¸­çš„æ–°é—»æ•°æ®ç”Ÿæˆæµ·æŠ¥
                let yPosition = 300;
                const spacing = 220; // æ¯ä¸ªæ–°é—»é¡¹ä¹‹é—´çš„é—´è·
                
                // å¾ªç¯ç”Ÿæˆæ‰€æœ‰æ–°é—»é¡¹
                for (let i = 0; i < newsData.items.length; i++) {
                    const item = newsData.items[i];
                    drawNewsItem(
                        yPosition, 
                        item.title, 
                        item.content,
                        item.emoji
                    );
                    yPosition += spacing; // ä¸ºä¸‹ä¸€ä¸ªæ–°é—»é¡¹å¢åŠ å‚ç›´ä½ç½®
                }
                
                // æ·»åŠ åº•éƒ¨æ ‡ç­¾èƒŒæ™¯ - æ›´åŠ é…·ç‚«çš„è®¾è®¡
                try {
                    const tagY = yPosition + 50; // åœ¨æœ€åä¸€æ¡æ–°é—»ä¸‹æ–¹æ·»åŠ æ ‡ç­¾
                    const tagGradient = ctx.createLinearGradient(0, tagY, 0, tagY + 80);
                    tagGradient.addColorStop(0, 'rgba(0, 40, 100, 0.7)');
                    tagGradient.addColorStop(1, 'rgba(30, 0, 60, 0.7)');
                    ctx.fillStyle = tagGradient;
                    roundRect(ctx, 50, tagY, canvas.width - 100, 80, 20, true, false);
                    
                    // æ·»åŠ æ ‡ç­¾å‘å…‰è¾¹æ¡†
                    ctx.strokeStyle = 'rgba(0, 174, 255, 0.3)';
                    ctx.lineWidth = 2;
                    roundRect(ctx, 50, tagY, canvas.width - 100, 80, 20, false, true);
                    
                    // æ·»åŠ åº•éƒ¨æ ‡ç­¾
                    const hashtagGradient = ctx.createLinearGradient(200, 0, 800, 0);
                    hashtagGradient.addColorStop(0, '#ffffff');
                    hashtagGradient.addColorStop(0.5, '#e0f7ff');
                    hashtagGradient.addColorStop(1, '#ffffff');
                    ctx.fillStyle = hashtagGradient;
                    ctx.font = 'bold 34px "PingFang SC", "Microsoft YaHei", sans-serif';
                    ctx.textAlign = 'center';
                    
                    // æ·»åŠ å‘å…‰æ•ˆæœ
                    ctx.shadowColor = 'rgba(0, 174, 255, 0.6)';
                    ctx.shadowBlur = 10;
                    
                    // å°†hashtagsè½¬æ¢ä¸ºæ ¼å¼åŒ–å­—ç¬¦ä¸²
                    const hashtagsStr = newsData.hashtags.map(tag => `#${tag}`).join(' ');
                    ctx.fillText(hashtagsStr, canvas.width / 2, tagY + 50);
                    ctx.shadowBlur = 0;
                    
                    // æ·»åŠ åº•éƒ¨æ°´å°
                    ctx.font = '22px "PingFang SC", "Microsoft YaHei", sans-serif';
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
                    ctx.fillText('AIæ–°é—»é€Ÿé€’ Â· ' + new Date().toLocaleDateString('zh-CN'), canvas.width / 2, tagY + 120);
                    
                    // æ·»åŠ åº•éƒ¨ç§‘æŠ€å…ƒç´ è£…é¥°
                    ctx.strokeStyle = 'rgba(0, 174, 255, 0.15)';
                    ctx.lineWidth = 1;
                    
                    // ç»˜åˆ¶ä¸€äº›éšæœºçš„çº¿æ¡å’Œåœ†ç‚¹
                    for (let i = 0; i < 15; i++) {
                        const startX = Math.random() * canvas.width;
                        const startY = tagY + 150 + Math.random() * 100;
                        
                        ctx.beginPath();
                        ctx.moveTo(startX, startY);
                        ctx.lineTo(startX + Math.random() * 200 - 100, startY + Math.random() * 100);
                        ctx.stroke();
                        
                        ctx.beginPath();
                        ctx.arc(startX, startY, Math.random() * 4 + 1, 0, Math.PI * 2);
                        ctx.fill();
                    }
                    
                    // æ·»åŠ é¢å¤–çš„ç§‘æŠ€æ„Ÿå…ƒç´  - ç”µè·¯æ¿é£æ ¼çš„å›¾æ¡ˆ
                    ctx.strokeStyle = 'rgba(0, 174, 255, 0.08)';
                    ctx.lineWidth = 1;
                    
                    // ç»˜åˆ¶éšæœºçš„ç”µè·¯å›¾æ¡ˆ
                    for (let i = 0; i < 8; i++) {
                        const startX = Math.random() * (canvas.width - 200) + 100;
                        const startY = tagY + 200;
                        
                        drawCircuitPath(ctx, startX, startY, 3 + Math.floor(Math.random() * 4), canvas);
                    }
                } catch (error) {
                    console.error('æ·»åŠ åº•éƒ¨è£…é¥°æ—¶å‡ºé”™:', error);
                }
                
            } catch (error) {
                console.error('ç»˜åˆ¶æ–°é—»æ¡†æ—¶å‡ºé”™:', error);
            }
        }
        
        // ç»˜åˆ¶ç”µè·¯æ¿é£æ ¼çš„è·¯å¾„
        function drawCircuitPath(ctx, x, y, steps, canvas) {
            try {
                if (!ctx || !canvas) {
                    console.error('æ— æ•ˆçš„ä¸Šä¸‹æ–‡æˆ–ç”»å¸ƒå‚æ•°');
                    return;
                }

                ctx.beginPath();
                ctx.moveTo(x, y);
                
                let currentX = x;
                let currentY = y;
                
                for (let i = 0; i < steps; i++) {
                    // éšæœºå†³å®šæ–¹å‘ (0: ä¸Š, 1: å³, 2: ä¸‹, 3: å·¦)
                    const direction = Math.floor(Math.random() * 4);
                    const distance = 20 + Math.random() * 40;
                    
                    switch(direction) {
                        case 0: // ä¸Š
                            currentY -= distance;
                            break;
                        case 1: // å³
                            currentX += distance;
                            break;
                        case 2: // ä¸‹
                            currentY += distance;
                            break;
                        case 3: // å·¦
                            currentX -= distance;
                            break;
                    }
                    
                    // ç¡®ä¿è·¯å¾„åœ¨ç”»å¸ƒèŒƒå›´å†…
                    currentX = Math.max(50, Math.min(canvas.width - 50, currentX));
                    currentY = Math.max(y - 50, Math.min(y + 50, currentY));
                    
                    try {
                        ctx.lineTo(currentX, currentY);
                        
                        // åœ¨æ‹è§’å¤„æ·»åŠ å°åœ†ç‚¹
                        ctx.stroke();
                        
                        ctx.beginPath();
                        ctx.arc(currentX, currentY, 3, 0, Math.PI * 2);
                        ctx.fill();
                        
                        ctx.beginPath();
                        ctx.moveTo(currentX, currentY);
                    } catch (pathError) {
                        console.error('ç»˜åˆ¶ç”µè·¯è·¯å¾„èŠ‚ç‚¹æ—¶å‡ºé”™:', pathError);
                        // é‡ç½®è·¯å¾„é¿å…ç´¯ç§¯é”™è¯¯
                        ctx.beginPath();
                        ctx.moveTo(currentX, currentY);
                    }
                }
                
                ctx.stroke();
            } catch (error) {
                console.error('ç»˜åˆ¶ç”µè·¯è·¯å¾„æ—¶å‡ºé”™:', error);
            }
        }
        
        // ç”Ÿæˆä¸€ä¸ªçº¯è‰²çš„logoå›¾åƒï¼ˆä¸ä¼šå¼•èµ·è·¨åŸŸé—®é¢˜ï¼‰
        function generateColorLogo(ctx) {
            // åˆ›å»ºä¸€ä¸ªå°å‹Canvasä½œä¸ºlogo
            const logoCanvas = document.createElement('canvas');
            logoCanvas.width = 100;
            logoCanvas.height = 100;
            const logoCtx = logoCanvas.getContext('2d');
            
            // ç»˜åˆ¶æ¸å˜èƒŒæ™¯
            const gradient = logoCtx.createLinearGradient(0, 0, 100, 100);
            gradient.addColorStop(0, '#00aeff');
            gradient.addColorStop(1, '#0066ff');
            logoCtx.fillStyle = gradient;
            logoCtx.fillRect(0, 0, 100, 100);
            
            // ç»˜åˆ¶å­—æ¯"AI"
            logoCtx.fillStyle = 'white';
            logoCtx.font = 'bold 50px Arial';
            logoCtx.textAlign = 'center';
            logoCtx.textBaseline = 'middle';
            logoCtx.fillText('AI', 50, 50);
            
            // å°†Canvasè½¬æ¢ä¸ºImageå¯¹è±¡
            const logoImage = new Image();
            logoImage.src = logoCanvas.toDataURL('image/png');
            
            return logoImage;
        }
    </script>
</body>
</html>